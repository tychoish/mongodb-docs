Removed Commands
----------------

In 2.8, the following internal commands are no longer available:

- ``closeAllDatabases``

- ``getoptime``

``db.addUser()`` Removed
------------------------

2.8 removes the legacy ``db.addUser()`` method. Use
:method:`db.createUser()` and :method:`db.updateUser()` instead..

Replica Set State Change
------------------------

The ``FATAL`` replica set state does not exist as of 2.8.0.

Replica Set Oplog Format Change
-------------------------------

.. TODO: link this section to the upgrade instructions.

MongoDB 2.8 is not compatible with oplog entries generated by versions
of MongoDB before 2.2.1. If you upgrade from one of these versions,
you must wait for new oplog entries to overwrite *all* old oplog
entries generated by one of these versions before upgrading to 2.8.0
or earlier.

Shell: Collection and Index Listing with ``wiredtiger`` and Older Shells
------------------------------------------------------------------------

With the ``wiredtiger`` storage engine, and versions of
the :program:`mongo` shell before ``2.8.0``, the
:method:`db.getCollectionNames()` (along with ``show collections`` and
``show tables``) and as well as :method:`db.collection.getIndexes()`
return no output.

Use the :program:`mongo` shell from a 2.8 distribution when connecting
to :program:`mongod` instances that use ``wiredtiger``.

Changes to Restart Behavior during Background Indexing
------------------------------------------------------

For 2.8 :program:`mongod` instances, if a background index build is in
progress when the :program:`mongod` process terminates, when the
instance restarts the index build will restart as foreground index
build. If the index build encounters any errors, such as a duplicate
key error, the :program:`mongod` will exit with an error.

To start the :program:`mongod` after a failed index build, use the
:setting:`storage.indexBuildRetry` or :option:`--noIndexBuildRetry
<mongod --noIndexBuildRetry>` to skip the index build on start up.
